# 第5章

## 1.Linux文件权限的重要性

Linux最优秀的地方之一就在于它的多人多任务环境。而为了各个用户具有保密的文件数据，因此文件权限管理就变得很重要了。Linux一般将文件可读写的身份分为三个类别：拥有者（owner），所属群组（group），其他人（others），且三种身份各有读（read），写（write），执行（execute）等权限。

- 系统保护的功能：
  举个简单的例子，在你的系统中，关于系统服务的文件通常只有root才能读写或者是执行，例如/etc/shadow这一个账号管理的文件，由于该文件记录了你系统中所有账号的数据， 因此是很重要的一个配置文件，当然不能让任何人读取(否则密码会被窃取)，只有root才能够来读取！
- 团队开发软件或数据共享的功能：
  此外，如果你有一个软件开发团队，在你的团队中，你希望每个人都可以使用某一些目录下的文件， 而非你的团队的其他人则不予以开放呢？以上面的例子来说，testgroup的团队共有三个人，分别是test1, test2, test3，那么我就可以将团队所需的文件权限订为[ -rwxrwx--- ]来提供给testgroup的工作团队使用！
- 未将权限设定妥当的危害：
  再举个例子来说，如果你的目录权限没有作好的话，可能造成其他人都可以在你的系统上面乱搞啰！ 例如本来只有root才能做的开关机、ADSL的拨接程序、新增或删除用户等等的指令，若被你改成任何人都可以执行的话， 那么如果使用者不小心给你重新启动啦！重新拨接啦！等等的！那么你的系统不就会常常莫名其妙的挂掉！ 而且万一你的用户的密码被其他不明人士取得的话，只要他登入你的系统就可以轻而易举的执行一些root的工作！

## 2.如何改变文件属性与权限？

- chgrp（即change group的缩写）：改变文件所属群组
- chown（change owner） ：改变文件拥有者
- chmod ：改变文件的权限, SUID, SGID, SBIT等等的特性

## 3.权限对文件的重要性

文件是实际含有数据的地方，包括一般文本文件、数据库内容文件、二进制可执行文件(binary program)等等。 因此，权限对于文件来说，他的意义是这样的：

- r (read)：可读取此一文件的实际内容，如读取文本文件的文字内容等；
- w (write)：可以编辑、新增或者是修改该文件的内容(但不含删除该文件)；
- x (execute)：该文件具有可以被系统执行的权限。

## 4.权限对目录的重要性

文件是存放实际数据的所在，那么目录主要是储存啥玩意啊？目录主要的内容在记录文件名列表，文件名与目录有强烈的关连啦！ 所以如果是针对目录时，那个 r, w, x 对目录是什么意义呢？

- **r (read contents in directory)**：

  表示具有读取目录结构列表的权限，所以当你具有读取(r)一个目录的权限时，表示你可以查询该目录下的文件名数据。 所以你就可以利用 ls 这个指令将该目录的内容列表显示出来！

- **w (modify contents of directory)**：

  这个可写入的权限对目录来说，是很了不起的！ 因为他表示你具有异动该目录结构列表的权限，也就是底下这些权限：

  - 建立新的文件与目录；
  - 删除已经存在的文件与目录(不论该文件的权限为何！)
  - 将已存在的文件或目录进行更名；
  - 搬移该目录内的文件、目录位置。

  总之，目录的w权限就与该目录底下的文件名异动有关就对了啦！

- **x (access directory)**：

  目录只是记录文件名而已，总不能拿来执行吧？没错！目录不可以被执行，目录的x代表的是用户能否进入该目录成为工作目录的用途！ 所谓的工作目录(work directory)就是你目前所在的目录啦！举例来说，当你登入Linux时， 你所在的家目录就是你当下的工作目录。而变换目录的指令是『cd』(change directory)

## 5.Linux文件种类和扩展名

- 正规文件(regular file )：就是一般我们在进行存取的类型的文件，在由 ls -al 所显示出来的属性方面，第一个字符为 [ - ]，例如 [-rwxrwxrwx ]。另外，依照文件的内容，又大略可以分为：

  - 纯文本档(ASCII)：这是Linux系统中最多的一种文件类型啰， 称为纯文本档是因为内容为我们人类可以直接读到的数据，例如数字、字母等等。 几乎只要我们可以用来做为设定的文件都属于这一种文件类型。 举例来说，你可以下达『 cat ~/.bashrc 』就可以看到该文件的内容。 (cat 是将一个文件内容读出来的指令)
  - 二进制文件(binary)：还记得我们在『 [第零章、计算器概论](http://cn.linux.vbird.org/linux_basic/0105computers.php) 』里面的[软件程序的运作](http://cn.linux.vbird.org/linux_basic/0105computers.php#program)中提过， 我们的系统其实仅认识且可以执行二进制文件(binary file)吧？没错～ 你的Linux当中的可执行文件(scripts, 文字型批处理文件不算)就是这种格式的啦～ 举例来说，刚刚下达的指令cat就是一个binary file。
  - 数据格式文件(data)： 有些程序在运作的过程当中会读取某些特定格式的文件，那些特定格式的文件可以被称为数据文件 (data file)。举例来说，我们的Linux在使用者登入时，都会将登录的数据记录在 /var/log/wtmp那个文件内，该文件是一个data file，他能够透过last这个指令读出来！ 但是使用cat时，会读出乱码～因为他是属于一种特殊格式的文件。瞭乎？

- **目录(directory)**：
  就是目录，第一个属性为 [ d ]，例如 [drwxrwxrwx]。

- **连结档(link)**：
  就是类似Windows系统底下的快捷方式啦！ 第一个属性为 [ l ](英文L的小写，例如 [lrwxrwxrwx] ；

- **设备与装置文件(device)：**

  与系统周边及储存等相关的一些文件， 通常都集中在/dev这个目录之下！通常又分为两种：

  - 区块(block)设备档 ：就是一些储存数据， 以提供系统随机存取的接口设备，举例来说，硬盘与软盘等就是啦！ 你可以随机的在硬盘的不同区块读写，这种装置就是成组设备啰！你可以自行查一下/dev/sda看看， 会发现第一个属性为[ b ]喔！
  - 字符(character)设备文件：亦即是一些串行端口的接口设备， 例如键盘、鼠标等等！这些设备的特色就是『一次性读取』的，不能够截断输出。 举例来说，你不可能让鼠标『跳到』另一个画面，而是『滑动』到另一个地方啊！第一个属性为 [ c ]。

- **数据接口文件(sockets)**：
  既然被称为数据接口文件， 想当然尔，这种类型的文件通常被用在网络上的数据承接了。我们可以启动一个程序来监听客户端的要求， 而客户端就可以透过这个socket来进行数据的沟通了。第一个属性为 [ s ]， 最常在/var/run这个目录中看到这种文件类型了。

- **数据输送文件(FIFO, pipe)**：
  FIFO也是一种特殊的文件类型，他主要的目的在解决多个程序同时存取一个文件所造成的错误问题。 FIFO是first-in-first-out的缩写。第一个属性为[p] 。